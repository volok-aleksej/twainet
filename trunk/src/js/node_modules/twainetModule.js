exports.Module = function(name, connector) {
	this.name = name;
	this.connector = connector;
	this.connMap = {};
}

exports.Module.prototype.addConnector = function(c, id) {
	var conn = new this.connector(c, id);
	conn.module = this;

	var connId = conn.getId();
	if(this.connMap[connId] === undefined) {
		this.connMap[connId] = conn;
	} else {
		conn.destroy();
	}
}

exports.Module.prototype.changeConnectorId = function(oldId, newId) {
	if(this.connMap[oldId] !== undefined) {
		var conn = this.connMap[oldId];
		delete this.connMap[oldId];
		this.connMap[newId] = conn;
	}
}

exports.Module.prototype.onDestroy = function(id) {
	if(this.connMap[id] !== undefined) {
		delete this.connMap[id];
	}
}

exports.Module.prototype.notifyMessage = function(messageObject) {
	for(id in this.connMap) if(this.connMap.hasOwnProperty(id)) {
		this.connMap[id].onMessage(messageObject);
	}
}
