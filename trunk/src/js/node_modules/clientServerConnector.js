var utils = require('twainetUtils');
var protobuf = require('protobufjs');
var conn = require('connector');

exports.ServerConnector = function(c) {
	var protoFilePath = "../messages/client_server.proto",
		self = this,
		protoMap = {},
		msgMap = {};

	conn.Connector.call(this, c);
	
	var handlers = function () {
	}
	handlers.prototype.Login = function(object) {
		console.info(object.get("name"));
	}

	this.builder = protobuf.loadProtoFile(protoFilePath);
	protoMap = this.builder.build();
	this.messageMap = {};
	msgMap = this.GenerateMap(protoMap, handlers.prototype);
	for(message in msgMap) if(msgMap.hasOwnProperty(message)){
		this.messageMap[message] = msgMap[message];
	}

	this.Start();
};

utils.extend(exports.ServerConnector, conn.Connector);